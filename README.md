# üìö –û–Ω–ª–∞–π–Ω-–∫–Ω–∏–≥–∞—Ä–Ω—è ‚Äî API –Ω–∞ NestJS

–¶–µ –±–µ–∫–µ–Ω–¥ –¥–ª—è –æ–Ω–ª–∞–π–Ω-–∫–Ω–∏–≥–∞—Ä–Ω—ñ, —Å—Ç–≤–æ—Ä–µ–Ω–∏–π –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é [NestJS](https://nestjs.com/).

# üöÄ –ó–∞–ø—É—Å–∫ –ø—Ä–æ—î–∫—Ç—É

## –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π
npm install

## –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞ —É —Ä–µ–∂–∏–º—ñ —Ä–æ–∑—Ä–æ–±–∫–∏
npm run start:dev

## üì¶ –û—Å–Ω–æ–≤–Ω—ñ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ

@nestjs/common, @nestjs/core, @nestjs/swagger

cookie-parser - –†–æ–±–æ—Ç–∞ –∑ cookie (—á–∏—Ç–∞–Ω–Ω—è, –≤–∏–¥–∞–ª–µ–Ω–Ω—è)

class-validator - –í–∞–ª—ñ–¥–∞—Ü—ñ—è DTO

typeorm ‚Äî –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ –ë–î

bcrypt ‚Äî –¥–ª—è —Ö–µ—à—É–≤–∞–Ω–Ω—è –ø–∞—Ä–æ–ª—ñ–≤

passport, jwt ‚Äî –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó

supabase ‚Äî –¥–ª—è –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è –∑–æ–±—Ä–∞–∂–µ–Ω—å

redis ‚Äî –¥–ª—è –∫–µ—Ä—É–≤–∞–Ω–Ω—è —Å–µ—Å—ñ—è–º–∏ —Ç–æ–∫–µ–Ω—ñ–≤

Swagger - API-–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è

# üõ†Ô∏è –ó–º—ñ–Ω–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞

### PORT ‚Äì –ø–æ—Ä—Ç —Å–µ—Ä–≤–µ—Ä—É (–∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º 4000)

### CLIENT_ORIGIN ‚Äì –¥–æ–∑–≤–æ–ª–µ–Ω–µ –ø–æ—Ö–æ–¥–∂–µ–Ω–Ω—è –¥–ª—è CORS (–∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º http://localhost:3000)

# üß† RedisService 

–°–µ—Ä–≤—ñ—Å –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ Redis —É –ø—Ä–æ—î–∫—Ç—ñ –Ω–∞ NestJS. –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –¥–ª—è –∫–µ—à—É–≤–∞–Ω–Ω—è, –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è —Ç–æ–∫–µ–Ω—ñ–≤. –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø—ñ–¥–∫–ª—é—á–∞—î—Ç—å—Å—è –¥–æ Redis –ø—Ä–∏ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó –º–æ–¥—É–ª—è —Ç–∞ –∑–∞–∫—Ä–∏–≤–∞—î –∑‚Äô—î–¥–Ω–∞–Ω–Ω—è –ø—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ñ.

>Redis-—Å–µ—Ä–≤–µ—Ä –º–∞—î –±—É—Ç–∏ –∑–∞–ø—É—â–µ–Ω–∏–π –ø–µ—Ä–µ–¥ —Å—Ç–∞—Ä—Ç–æ–º NestJS-–¥–æ–¥–∞—Ç–∫—É.

### ‚öôÔ∏è –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è Redis

this.client = new Redis({
host: 'localhost',
port: 6379,
});

# ‚òÅÔ∏è Supabase Service

–Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑—É—î Supabase –∫–ª—ñ—î–Ω—Ç –¥–ª—è –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è —Ñ–∞–π–ª—ñ–≤ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –∞–≤–∞—Ç–∞—Ä—ñ–≤ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤, –æ–±–∫–ª–∞–¥–∏–Ω–æ–∫ –Ω–æ–≤–∏–Ω, —Ç–æ—â–æ).

### ‚öôÔ∏è –ü—Ä–∏–∫–ª–∞–¥ .env 

CONFIG__SUPABASE__URL=https://your-project.supabase.co

CONFIG__SUPABASE__KEY=your-secret-api-key

>–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ service role key –ª–∏—à–µ –Ω–∞ –±–µ–∫–µ–Ω–¥—ñ. –ù–µ –≤–∏–≤–æ–¥—å—Ç–µ –∫–ª—é—á —É —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥.

# üìß Email Service 

–°–µ—Ä–≤—ñ—Å –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó —Ç–∞ –Ω–∞–¥—Å–∏–ª–∞–Ω–Ω—è email-–ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å —á–µ—Ä–µ–∑ Gmail SMTP –∑ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è–º —à–∞–±–ª–æ–Ω—ñ–≤ Handlebars. –ü—ñ–¥—Ç—Ä–∏–º—É—î—Ç—å—Å—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∑ layout, partial'–∞–º–∏ (header, footer) —Ç–∞ –¥–∏–Ω–∞–º—ñ—á–Ω–∏–º –Ω–∞–ø–æ–≤–Ω–µ–Ω–Ω—è–º –∫–æ–Ω—Ç–µ–Ω—Ç—É.

### üõ†Ô∏è –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è .env

CONFIG__SMTP__SMTP_EMAIL=your_email@gmail.com 

CONFIG__SMTP__SMTP_PASSWORD=your_gmail_app_password

>Gmail –≤–∏–º–∞–≥–∞—î —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è App Passwords –ø—Ä–∏ –≤–∫–ª—é—á–µ–Ω—ñ–π 2FA.

# üîêAuth

–†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ –ø–æ–≤–Ω–∏–π —Ü–∏–∫–ª –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞, –≤–∫–ª—é—á–∞—é—á–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∞–≤–∞—Ç–∞—Ä—ñ–≤, —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—é, –ª–æ–≥—ñ–Ω, –æ–Ω–æ–≤–ª–µ–Ω–Ω—è —Ç–æ–∫–µ–Ω—ñ–≤, –≤–∏—Ö—ñ–¥ —ñ–∑ —Å–∏—Å—Ç–µ–º–∏.

–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è
–î–ª—è –∑–∞—Ö–∏—â–µ–Ω–∏—Ö –º–∞—Ä—à—Ä—É—Ç—ñ–≤ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è @UseGuards(AuthGuard()) —ñ–∑ JWT.

>refreshToken –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è –≤ HTTP-only cookie

>mail-–Ω–æ—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó
–ü—ñ—Å–ª—è —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—É –≤—ñ–¥–ø—Ä–∞–≤–ª—è—î—Ç—å—Å—è –≤—ñ—Ç–∞–ª—å–Ω–∏–π email –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é EmailService.

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è
–†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è
POST /auth/registration

multipart/form-data

–¢—ñ–ª–æ: email, password, firstName, lastName, age, phone, image (—Ñ–∞–π–ª) (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ)

üì• –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–µ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è —É Supabase. –Ø–∫—â–æ –Ω–µ –ø–µ—Ä–µ–¥–∞–Ω–æ ‚Äî –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –∞–≤–∞—Ç–∞—Ä –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º.


### –õ–æ–≥—ñ–Ω
POST /auth/login

–¢—ñ–ª–æ: email, password

üì§ –í—ñ–¥–ø–æ–≤—ñ–¥—å:

json
{
  "accessToken": "jwt-token",
  "refreshToken": "refresh-token"
}

### –í–∏—Ö—ñ–¥
POST /auth/logout
üîê Requires Bearer Token

### –û–Ω–æ–≤–ª–µ–Ω–Ω—è —Ç–æ–∫–µ–Ω—ñ–≤
POST /auth/refresh

üì§ –í—ñ–¥–ø–æ–≤—ñ–¥—å:
json
{
  "refreshToken": "..."
}

### –°–∫–∏–¥–∞–Ω–Ω—è –ø–∞—Ä–æ–ª—è (—á–µ—Ä–µ–∑ email)

PATCH /auth/resetPassword

–¢—ñ–ª–æ:
email: string;

>–¶–µ–π –º–∞—Ä—à—Ä—É—Ç –Ω–µ –≤–∏–º–∞–≥–∞—î —Ç–æ–∫–µ–Ω–∞ ‚Äî –≤–∏–∫–ª–∏–∫–∞—î—Ç—å—Å—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–µ–º, —è–∫–∏–π –∑–∞–±—É–≤ –ø–∞—Ä–æ–ª—å.
–ù–∞ –ø–æ—à—Ç—É –ø—Ä–∏—Ö–æ–¥–∏—Ç—å –≤–∏–ø–∞–¥–∫–æ–≤–æ –∑–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω–∏–π –ø–∞—Ä–æ–ª—å.

### –ó–º—ñ–Ω–∞ –ø–∞—Ä–æ–ª—è

PATCH /auth/newPassword

Authorization: Bearer <accessToken>

–¢—ñ–ª–æ:
{
"oldPassword": "currentPassword",
"newPassword": "newSecurePassword"
}

üì§ –í—ñ–¥–ø–æ–≤—ñ–¥—å:
{
"message": "Password updated successfully"
}

# üõí Basket

–§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª –¥–æ–∑–≤–æ–ª—è—î –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–∏–º –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º –¥–æ–¥–∞–≤–∞—Ç–∏ –∫–Ω–∏–≥–∏ –¥–æ –∫–æ—à–∏–∫–∞, –≤–∏–¥–∞–ª—è—Ç–∏ –æ–∫—Ä–µ–º—ñ –∫–Ω–∏–≥–∏, –æ—á–∏—â–∞—Ç–∏ –≤–µ—Å—å –∫–æ—à–∏–∫ —ñ –ø–µ—Ä–µ–≥–ª—è–¥–∞—Ç–∏ –≤–º—ñ—Å—Ç.

> –£—Å—ñ –º–∞—Ä—à—Ä—É—Ç–∏ –≤–∏–º–∞–≥–∞—é—Ç—å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó (JWT Bearer Token).

### –û—Ç—Ä–∏–º–∞—Ç–∏ –ø–æ—Ç–æ—á–Ω–∏–π –∫–æ—à–∏–∫

ET /basket/find

Headers:
Authorization: Bearer <accessToken>

üì§ –í—ñ–¥–ø–æ–≤—ñ–¥—å: –û–±'—î–∫—Ç –∫–æ—à–∏–∫–∞ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞:

json
{
"id": "basket-id",
"user": { ... },
"items": [
{
"id": "item-id",
"book": {
"id": "book-id",
"title": "–ù–∞–∑–≤–∞ –∫–Ω–∏–≥–∏",
...
},
"quantity": 2
},
...
]
}

### –î–æ–¥–∞—Ç–∏ –∫–Ω–∏–≥—É –¥–æ –∫–æ—à–∏–∫–∞

POST /basket/add

Headers:
Authorization: Bearer <accessToken>

–¢—ñ–ª–æ:
json
  {
    "bookId": "string",
    "quantity": 2 // –æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ, –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º 1
  }
üì§ –í—ñ–¥–ø–æ–≤—ñ–¥—å: –û–Ω–æ–≤–ª–µ–Ω–∏–π –æ–±'—î–∫—Ç –∫–æ—à–∏–∫–∞

### –í–∏–¥–∞–ª–∏—Ç–∏ –æ–¥–Ω—É –∫–Ω–∏–≥—É –∑ –∫–æ—à–∏–∫–∞

DELETE /basket/remove/:id

:id ‚Äî bookId

Headers:
Authorization: Bearer <accessToken>

üì§ –í—ñ–¥–ø–æ–≤—ñ–¥—å: –û–Ω–æ–≤–ª–µ–Ω–∏–π –æ–±'—î–∫—Ç –∫–æ—à–∏–∫–∞

### –û—á–∏—Å—Ç–∏—Ç–∏ –≤–µ—Å—å –∫–æ—à–∏–∫

DELETE /basket/clear

Headers:
Authorization: Bearer <accessToken>

üì§ –í—ñ–¥–ø–æ–≤—ñ–¥—å: –û–Ω–æ–≤–ª–µ–Ω–∏–π (–ø–æ—Ä–æ–∂–Ω—ñ–π) –æ–±'—î–∫—Ç –∫–æ—à–∏–∫–∞

### üìò –ü—Ä–∏–º—ñ—Ç–∫–∏

>–Ø–∫—â–æ –∫–Ω–∏–≥–∞ –≤–∂–µ —î –≤ –∫–æ—à–∏–∫—É ‚Äî —ó—ó –∫—ñ–ª—å–∫—ñ—Å—Ç—å –∑–±—ñ–ª—å—à—É—î—Ç—å—Å—è.

>–Ø–∫—â–æ –ø–µ—Ä–µ–¥–∞—Ç–∏ –≤—ñ–¥'—î–º–Ω—É –∫—ñ–ª—å–∫—ñ—Å—Ç—å, –≤–æ–Ω–∞ –±—É–¥–µ –ø—Ä–∏–≤–µ–¥–µ–Ω–∞ –¥–æ 0.

>–Ø–∫—â–æ –∫–æ—à–∏–∫–∞ –≤ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ —â–µ –Ω–µ–º–∞—î ‚Äî –≤—ñ–Ω —Å—Ç–≤–æ—Ä—é—î—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ.

# üìö Books

–ú–æ–¥—É–ª—å –¥–ª—è –∫–µ—Ä—É–≤–∞–Ω–Ω—è –∫–Ω–∏–≥–∞–º–∏: —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è, –æ–Ω–æ–≤–ª–µ–Ω–Ω—è, –ø—É–±–ª—ñ–∫–∞—Ü—ñ—è, –æ—Ç—Ä–∏–º–∞–Ω–Ω—è, —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è —Ç–∞ –≤–∏–¥–∞–ª–µ–Ω–Ω—è.

### –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫–Ω–∏–≥–∏

POST /books/create-book

Headers:
Authorization: Bearer <accessToken>

–ü–æ–ª–µ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è: image

–¢—ñ–ª–æ:
title: string;
price: number;
description?: string;
author?: string;
gift: boolean;
cover: 'soft' | 'firm';
categories: string[];

### –û–Ω–æ–≤–ª–µ–Ω–Ω—è –∫–Ω–∏–≥–∏

PATCH /books/update/:id

Headers:
Authorization: Bearer <accessToken>

–¢—ñ–ª–æ: (–≤—Å—ñ –ø–æ–ª—è –æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ) title?: string;
price?: number;
description?: string;
author?: string;
image?: string;
gift?: boolean;
cover?: 'soft' | 'firm';
categories?: string[];

### –ó–º—ñ–Ω–∞ —Å—Ç–∞—Ç—É—Å—É –ø—É–±–ª—ñ–∫–∞—Ü—ñ—ó

PUT /books/published/:id

Headers:
Authorization: Bearer <accessToken>

### –û—Ç—Ä–∏–º–∞–Ω–Ω—è —Å–ø–∏—Å–∫—É –∫–Ω–∏–≥

GET /books/list

### –û—Ç—Ä–∏–º–∞–Ω–Ω—è –æ–¥–Ω—ñ—î—ó –∫–Ω–∏–≥–∏

GET /books/find/:id

### –í–∏–¥–∞–ª–µ–Ω–Ω—è –∫–Ω–∏–≥–∏

DELETE /books/delete/:id

Headers:
Authorization: Bearer <accessToken>

# üß© Category
–ú–æ–¥—É–ª—å Category –∑–∞–±–µ–∑–ø–µ—á—É—î CRUD-–æ–ø–µ—Ä–∞—Ü—ñ—ó –¥–ª—è –∫–∞—Ç–µ–≥–æ—Ä—ñ–π –∫–Ω–∏–≥ –∑ –ø—ñ–¥—Ç—Ä–∏–º–∫–æ—é –ø–∞–≥—ñ–Ω–∞—Ü—ñ—ó, —Å–æ—Ä—Ç—É–≤–∞–Ω–Ω—è, —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—ó —Ç–∞ –≤–∫–ª–∞–¥–µ–Ω–∏—Ö –∫–∞—Ç–µ–≥–æ—Ä—ñ–π.

### –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó

POST /category/create

>–¢—ñ–ª—å–∫–∏ Admin

Authorization: Bearer <accessToken>

–¢—ñ–ª–æ:
name: string,
parentId?: string

### –û–Ω–æ–≤–ª–µ–Ω–Ω—è –∫–∞—Ç–µ–≥–æ—Ä—ñ–π

PATCH /category/update/:id

>–¢—ñ–ª—å–∫–∏ Admin

Authorization: Bearer <accessToken>

–¢—ñ–ª–æ: (—É—Å—ñ –ø–æ–ª—è –æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ)
name?: string,
parentId?:string

### –í–∏–¥–∞–ª–µ–Ω–Ω—è –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó

DELETE /category/delete/:id

Authorization: Bearer <accessToken>

>–¢—ñ–ª—å–∫–∏ Admin

### –û—Ç—Ä–∏–º–∞–Ω–Ω—è —Å–ø–∏—Å–∫—É –∫–∞—Ç–µ–≥–æ—Ä—ñ–π

GET /category/list

Query-–ø–∞—Ä–∞–º–µ—Ç—Ä–∏:

| –ü–∞—Ä–∞–º–µ—Ç—Ä   | –¢–∏–ø    | –û–ø–∏—Å                                         |
| ---------- | ------ | -------------------------------------------- |
| `page`     | string | –ù–æ–º–µ—Ä —Å—Ç–æ—Ä—ñ–Ω–∫–∏ (–∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º: 1)         |
| `limit`    | string | –ö—ñ–ª—å–∫—ñ—Å—Ç—å –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫—É (–∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º: 10) |
| `sort`     | string | –ü–æ–ª–µ –¥–ª—è —Å–æ—Ä—Ç—É–≤–∞–Ω–Ω—è (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, `name`)      |
| `order`    | string | `'ASC'` –∞–±–æ `'DESC'`                         |
| `search`   | string | –ü–æ—à—É–∫ –ø–æ –Ω–∞–∑–≤—ñ                               |
| `parentId` | string | –§—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è –ø–æ –±–∞—Ç—å–∫—ñ–≤—Å—å–∫—ñ–π –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó         |
| `name`     | string | –¢–æ—á–Ω–∞ –Ω–∞–∑–≤–∞ –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó                        |
| `id`       | string | –ü–æ—à—É–∫ –ø–æ ID                                  |

### –û—Ç—Ä–∏–º–∞–Ω–Ω—è –≥–æ–ª–æ–≤–Ω–∏—Ö –∫–∞—Ç–µ–≥–æ—Ä—ñ–π

GET /category/mainCategories/list

>–ü–æ–≤–µ—Ä—Ç–∞—î –ª–∏—à–µ –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó, —É —è–∫–∏—Ö –Ω–µ–º–∞—î parentId.

### –û—Ç—Ä–∏–º–∞–Ω–Ω—è –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó –ø–æ ID

GET /category/find/id/:id

# üí¨ Comments 

–ú–æ–¥—É–ª—å –¥–ª—è –∫–µ—Ä—É–≤–∞–Ω–Ω—è –∫–æ–º–µ–Ω—Ç–∞—Ä—è–º–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ –¥–æ –∫–Ω–∏–≥: —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è, –æ–Ω–æ–≤–ª–µ–Ω–Ω—è, —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è, –ø–µ—Ä–µ–≥–ª—è–¥ —Ç–∞ –≤–∏–¥–∞–ª–µ–Ω–Ω—è. –ü—ñ–¥—Ç—Ä–∏–º—É—î –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—é —Ç–∞ —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—é –∑–∞ book_id —ñ user_id. –¢—ñ–ª—å–∫–∏ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ –º–æ–∂—É—Ç—å:
—Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ –∫–æ–º–µ–Ω—Ç–∞—Ä—ñ
–æ–Ω–æ–≤–ª—é–≤–∞—Ç–∏ —Å–≤–æ—ó –∫–æ–º–µ–Ω—Ç–∞—Ä—ñ
–≤–∏–¥–∞–ª—è—Ç–∏ —Å–≤–æ—ó –∫–æ–º–µ–Ω—Ç–∞—Ä—ñ

### –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫–æ–º–µ–Ω—Ç–∞—Ä—è

POST /comments/create-comment

Authorization: Bearer <accessToken>

–¢—ñ–ª–æ:
book_id: string,
text: string

–í—ñ–¥–ø–æ–≤—ñ–¥—å:
{
"id": "b3a6c35e-4bb3-4f29-b8fc-720be24a3fd9",
"user_id": "USER_ID",
"book_id": "7b6d6402-e7f2-42e1-9445-19ec1bd154a2",
"text": "–î—É–∂–µ —Å–ø–æ–¥–æ–±–∞–ª–∞—Å—å –∫–Ω–∏–≥–∞!",
"createdAt": "2025-06-25T08:00:00.000Z"
}

### –û–Ω–æ–≤–ª–µ–Ω–Ω—è –∫–æ–º–µ–Ω—Ç–∞—Ä—è

PATCH /comments/update/:id

Authorization: Bearer <accessToken>

–¢—ñ–ª–æ:
text: string

>–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –º–æ–∂–µ —Ä–µ–¥–∞–≥—É–≤–∞—Ç–∏ –ª–∏—à–µ —Å–≤–æ—ó –∫–æ–º–µ–Ω—Ç–∞—Ä—ñ.

### –í–∏–¥–∞–ª–µ–Ω–Ω—è –∫–æ–º–µ–Ω—Ç–∞—Ä—è

DELETE /comments/delete/:id

Authorization: Bearer <accessToken>

>–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –º–æ–∂–µ –≤–∏–¥–∞–ª–∏—Ç–∏ –ª–∏—à–µ —Å–≤–æ—ó –∫–æ–º–µ–Ω—Ç–∞—Ä—ñ.

### –û—Ç—Ä–∏–º–∞–Ω–Ω—è —Å–ø–∏—Å–∫—É –∫–æ–º–µ–Ω—Ç–∞—Ä—ñ–≤

GET /comments/list

Query-–ø–∞—Ä–∞–º–µ—Ç—Ä–∏:

| –ü–∞—Ä–∞–º–µ—Ç—Ä  | –¢–∏–ø    | –û–ø–∏—Å                                     |
| --------- | ------ | ---------------------------------------- |
| `page`    | string | –ù–æ–º–µ—Ä —Å—Ç–æ—Ä—ñ–Ω–∫–∏ (default: `1`)            |
| `limit`   | string | –ö—ñ–ª—å–∫—ñ—Å—Ç—å –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫—É (default: `10`)    |
| `sort`    | string | –ü–æ–ª–µ —Å–æ—Ä—Ç—É–≤–∞–Ω–Ω—è (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, `createdAt`) |
| `order`   | string | `'ASC'` –∞–±–æ `'DESC'` (default: `ASC`)    |
| `book_id` | string | –§—ñ–ª—å—Ç—Ä –ø–æ ID –∫–Ω–∏–≥–∏                       |
| `user_id` | string | –§—ñ–ª—å—Ç—Ä –ø–æ ID –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞                 |

### –û—Ç—Ä–∏–º–∞–Ω–Ω—è –æ–¥–Ω–æ–≥–æ –∫–æ–º–µ–Ω—Ç–∞—Ä—è

GET /comments/find/:id

# üì∞ News

–ú–æ–¥—É–ª—å –¥–ª—è –∫–µ—Ä—É–≤–∞–Ω–Ω—è –Ω–æ–≤–∏–Ω–∞–º–∏: —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è, –æ–Ω–æ–≤–ª–µ–Ω–Ω—è, –æ—Ç—Ä–∏–º–∞–Ω–Ω—è —Å–ø–∏—Å–∫—É, —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è, –ø–µ—Ä–µ–≥–ª—è–¥ –ø–æ ID —Ç–∞ –≤–∏–¥–∞–ª–µ–Ω–Ω—è. –ü—ñ–¥—Ç—Ä–∏–º—É—î—Ç—å—Å—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∑–æ–±—Ä–∞–∂–µ–Ω—å —Ç–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü—ñ—è –Ω–æ–≤–∏–Ω –Ω–∞ —Ç–∏–ø–∏: general, promotion, event. –¢—ñ–ª—å–∫–∏ –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä (Admin) –º–∞—î –¥–æ—Å—Ç—É–ø –¥–æ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è, —Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è —Ç–∞ –≤–∏–¥–∞–ª–µ–Ω–Ω—è –Ω–æ–≤–∏–Ω.

### –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –Ω–æ–≤–∏–Ω–∏

POST /news/create

Authorization: Bearer <accessToken>

–¢—ñ–ª–æ:
title:string
content:string	
category:string	'general' | 'promotion' | 'event'
image?:file (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–µ)

–í—ñ–¥–ø–æ–≤—ñ–¥—å:
{
"id": "1",
"title": "–ù–æ–≤–∏–π —Ä–æ–∑–¥—ñ–ª –≤—ñ–¥–∫—Ä–∏—Ç–æ",
"content": "...",
"category": "event",
"image": "https://your-storage.com/news-images/123.jpg",
"createdAt": "2025-06-25T10:00:00.000Z"
}

### –û–Ω–æ–≤–ª–µ–Ω–Ω—è –Ω–æ–≤–∏–Ω–∏

PATCH /news/update/:id

Authorization: Bearer <accessToken>

–¢—ñ–ª–æ(–≤—Å—ñ –ø–æ–ª—è –æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ):
title?: string,
content?: string,
category?: string 'general' | 'promotion' | 'event'

### –í–∏–¥–∞–ª–µ–Ω–Ω—è –Ω–æ–≤–∏–Ω–∏

DELETE /news/delete/:id

Authorization: Bearer <accessToken>

###  –û—Ç—Ä–∏–º–∞–Ω–Ω—è —Å–ø–∏—Å–∫—É –Ω–æ–≤–∏–Ω

GET /news/list

Query-–ø–∞—Ä–∞–º–µ—Ç—Ä–∏:

| –ü–∞—Ä–∞–º–µ—Ç—Ä   | –¢–∏–ø    | –û–ø–∏—Å                                            |
| ---------- | ------ | ----------------------------------------------- |
| `page`     | string | –ù–æ–º–µ—Ä —Å—Ç–æ—Ä—ñ–Ω–∫–∏ (default: `1`)                   |
| `limit`    | string | –ö—ñ–ª—å–∫—ñ—Å—Ç—å –Ω–æ–≤–∏–Ω –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫—É (default: `10`)     |
| `sort`     | string | –ü–æ–ª–µ –¥–ª—è —Å–æ—Ä—Ç—É–≤–∞–Ω–Ω—è (`title`, `createdAt` —Ç–æ—â–æ) |
| `order`    | string | `'ASC'` –∞–±–æ `'DESC'` (default: `'ASC'`)         |
| `title`    | string | –ü–æ—à—É–∫ –Ω–æ–≤–∏–Ω –∑–∞ —á–∞—Å—Ç–∏–Ω–æ—é –∑–∞–≥–æ–ª–æ–≤–∫—É               |
| `category` | string | `'general'` \| `'promotion'` \| `'event'`       |

### –û—Ç—Ä–∏–º–∞–Ω–Ω—è –Ω–æ–≤–∏–Ω–∏ –∑–∞ ID

GET /news/find/id/:id

# üë§ Users

–ú–æ–¥—É–ª—å –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º–∏: –æ—Ç—Ä–∏–º–∞–Ω–Ω—è —Å–ø–∏—Å–∫—É, –ø–µ—Ä–µ–≥–ª—è–¥ –ø—Ä–æ—Ñ—ñ–ª—é, –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–∏—Ö –¥–∞–Ω–∏—Ö, –∑–º—ñ–Ω–∞ —Ä–æ–ª—ñ (–¥–ª—è –∞–¥–º—ñ–Ω—ñ–≤) —Ç–∞ –≤–∏–¥–∞–ª–µ–Ω–Ω—è.

### –û—Ç—Ä–∏–º–∞–Ω–Ω—è —Å–ø–∏—Å–∫—É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤

GET /users/list

Query-–ø–∞—Ä–∞–º–µ—Ç—Ä–∏:

| –ü–∞—Ä–∞–º–µ—Ç—Ä    | –¢–∏–ø    | –û–ø–∏—Å                                           |
| ----------- | ------ | ---------------------------------------------- |
| `page`      | string | –ù–æ–º–µ—Ä —Å—Ç–æ—Ä—ñ–Ω–∫–∏ (default: `1`)                  |
| `limit`     | string | –ö—ñ–ª—å–∫—ñ—Å—Ç—å –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫—É (default: `10`)          |
| `sort`      | string | –ü–æ–ª–µ –¥–ª—è —Å–æ—Ä—Ç—É–≤–∞–Ω–Ω—è (`firstName`, `age`, —Ç–æ—â–æ) |
| `order`     | string | `'ASC'` –∞–±–æ `'DESC'` (default: `'ASC'`)        |
| `firstName` | string | –ü–æ—à—É–∫ –ø–æ —ñ–º–µ–Ω—ñ                                 |
| `lastName`  | string | –ü–æ—à—É–∫ –ø–æ –ø—Ä—ñ–∑–≤–∏—â—É                              |
| `email`     | string | –§—ñ–ª—å—Ç—Ä –ø–æ email                                |
| `phone`     | string | –§—ñ–ª—å—Ç—Ä –ø–æ –Ω–æ–º–µ—Ä—É —Ç–µ–ª–µ—Ñ–æ–Ω—É                      |
| `age`       | number | –§—ñ–ª—å—Ç—Ä –ø–æ –≤—ñ–∫—É                                 |

### –û—Ç—Ä–∏–º–∞–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –∑–∞ ID

GET /users/find/:id

### –û—Ç—Ä–∏–º–∞–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –∑ JWT (—Å–µ–±–µ)

GET /users/find

Authorization: Bearer <accessToken>

>–ü–æ–≤–µ—Ä—Ç–∞—î –¥–∞–Ω—ñ –ø—Ä–æ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –Ω–∞ –æ—Å–Ω–æ–≤—ñ —Ç–æ–∫–µ–Ω–∞. 

### –û–Ω–æ–≤–ª–µ–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á

PATCH /users/update/:id

Authorization: Bearer <accessToken>

–¢—ñ–ª–æ: (–í—Å—ñ –ø–æ–ª—è –æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ)
firstName?: string;
lastName?: string;
phone?: string;
age?: number;

>–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –º–æ–∂–µ –æ–Ω–æ–≤–ª—é–≤–∞—Ç–∏ –ª–∏—à–µ —Å–≤—ñ–π –ø—Ä–æ—Ñ—ñ–ª—å.

### –ó–º—ñ–Ω–∞ —Ä–æ–ª—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞

PATCH /users/role/:id

Authorization: Bearer <accessToken>

>–¢—ñ–ª—å–∫–∏ –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä –º–∞—î –¥–æ—Å—Ç—É–ø –¥–æ –∑–º—ñ–Ω–∏ —Ä–æ–ª–µ–π.
–í–Ω—É—Ç—Ä—ñ—à–Ω—å–æ –∑–º—ñ–Ω—é—î—Ç—å—Å—è —Ä–æ–ª—å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –∑ User –Ω–∞ Admin –∞–±–æ –Ω–∞–≤–ø–∞–∫–∏).

### –í–∏–¥–∞–ª–µ–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞

DELETE /users/delete/:id

Authorization: Bearer <accessToken>

>–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –º–æ–∂–µ –≤–∏–¥–∞–ª–∏—Ç–∏ —Å–≤—ñ–π –ø—Ä–æ—Ñ—ñ–ª—å.

### –í–∏–¥–∞–ª–µ–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –∞–¥–º—ñ–Ω—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º

DELETE /users/exclude/:id

Authorization: Bearer <accessToken>

>–ê–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä –º–æ–∂–µ –≤–∏–¥–∞–ª—è—Ç–∏ —Ç—ñ–ª—å–∫–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤, role = User.

# üëç Likes

–ú–æ–¥—É–ª—å –¥–æ–∑–≤–æ–ª—è—î –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º –¥–æ–¥–∞–≤–∞—Ç–∏/–≤–∏–¥–∞–ª—è—Ç–∏ —É–ª—é–±–ª–µ–Ω—ñ –∫–Ω–∏–≥–∏, –ø–µ—Ä–µ–≥–ª—è–¥–∞—Ç–∏ —Å–≤–æ—ó –ª–∞–π–∫–∏ —Ç–∞ –±–∞—á–∏—Ç–∏ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –ª–∞–π–∫—ñ–≤ –¥–ª—è –∫–æ–∂–Ω–æ—ó –∫–Ω–∏–≥–∏.

>–ü—Ä–∏ –¥–æ–¥–∞–≤–∞–Ω–Ω—ñ/–≤–∏–¥–∞–ª–µ–Ω–Ω—ñ –ª–∞–π–∫—É –æ–Ω–æ–≤–ª—é—î—Ç—å—Å—è –ø–æ–ª–µ likesCount —É —Å—É—Ç–Ω–æ—Å—Ç—ñ Book.

### –î–æ–¥–∞—Ç–∏ –ª–∞–π–∫

POST /likes/:bookId

Authorization: Bearer <accessToken>

>–Ø–∫—â–æ –ª–∞–π–∫ –≤–∂–µ —ñ—Å–Ω—É–≤–∞–≤ ‚Äî –±—É–¥–µ –≤–∏–¥–∞–ª–µ–Ω–æ

### –í–∏–¥–∞–ª—è—î –ª–∞–π–∫y

DELETE /likes/:bookId

Authorization: Bearer <accessToken>

–í–∏–¥–∞–ª—è—î –ª–∞–π–∫ –¥–ª—è –≤–∫–∞–∑–∞–Ω–æ—ó –∫–Ω–∏–≥–∏.

–í—ñ–¥–ø–æ–≤—ñ–¥—å:
{
"message": "Like removed"
}

### –°–ø–∏—Å–æ–∫ –≤–ø–æ–¥–æ–±–∞–Ω–∏—Ö –∫–Ω–∏–≥

GET /likes/list

Authorization: Bearer <accessToken>

–ü–æ–≤–µ—Ä—Ç–∞—î —Å–ø–∏—Å–æ–∫ —É—Å—ñ—Ö –∫–Ω–∏–≥, —è–∫—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –≤–ø–æ–¥–æ–±–∞–≤.

–ü–∞—Ä–∞–º–µ—Ç—Ä–∏ –∑–∞–ø–∏—Ç—É (–Ω–µ–æ–±–æ–≤'—è–∑–∫–æ–≤–æ) ‚Äì –¥–æ—Å—Ç—É–ø–Ω—ñ –≤—Å—ñ –ø–æ–ª—è –∑ BookQueryDto,

>–ó–∞–ø–∏—Ç–∏ –¥–æ /likes/list –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å QueryBuilder –∑ –ø–æ–≤–Ω–æ—é –ø—ñ–¥—Ç—Ä–∏–º–∫–æ—é —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—ó, —Å–æ—Ä—Ç—É–≤–∞–Ω–Ω—è —Ç–∞ –ø–∞–≥—ñ–Ω–∞—Ü—ñ—ó.

–í—ñ–¥–ø–æ–≤—ñ–¥—å:
{
"page": 1,
"pages": 3,
"countItems": 25,
"entities": [
{
"id": "bookId",
"title": "Book title",
...
}
]
}

### –ö—ñ–ª—å–∫—ñ—Å—Ç—å –ª–∞–π–∫—ñ–≤

GET /likes/count/:bookId

Authorization: Bearer <accessToken>

–ü–æ–≤–µ—Ä—Ç–∞—î –∫—ñ–ª—å–∫—ñ—Å—Ç—å –ª–∞–π–∫—ñ–≤ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ—ó –∫–Ω–∏–≥–∏.

–í—ñ–¥–ø–æ–≤—ñ–¥—å:
{
"count": 12
}